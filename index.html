<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Power Log - Final Pro</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #020617; color: white; -webkit-tap-highlight-color: transparent; overflow-x: hidden; }
    .font-digital { font-family: 'Orbitron', sans-serif; }
    .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
    .animate-fadeIn { animation: fadeIn 0.4s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
  </style>
</head>
<body>

<div id="app">
  <div v-if="!isAuthenticated" class="min-h-screen flex items-center justify-center p-6 bg-slate-950">
    <div class="w-full max-w-xs text-center space-y-8 animate-fadeIn">
      <h1 class="text-4xl font-black italic text-lime-400 tracking-tighter mb-2">POWER LOG</h1>
      <input type="password" v-model="passInput" @input="checkPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="w-full bg-slate-900 border-2 border-slate-800 rounded-3xl p-6 text-center text-3xl font-digital text-lime-400 outline-none">
      <p v-if="passError" class="text-red-500 text-[10px] font-black uppercase animate-pulse">Access Denied</p>
    </div>
  </div>

  <div v-else class="max-w-md mx-auto min-h-screen p-4 pb-24 animate-fadeIn">
    <header class="flex justify-between items-center mb-6 pt-4 px-1">
      <div>
        <h1 class="text-2xl font-black italic tracking-tighter text-lime-400">POWER LOG</h1>
        <div class="text-[10px] font-bold text-slate-500 mt-2 uppercase tracking-widest flex items-center gap-1">
          üî• {{ streak }} Day Streak <span v-if="syncing" class="ml-2 text-lime-500 animate-pulse text-[8px]">‚óè Syncing</span>
        </div>
      </div>
      <div class="bg-slate-900 p-1 rounded-2xl flex border border-slate-800 shadow-inner">
        <button v-for="u in ['JW', 'EP']" @click="switchUser(u)" 
                :class="user === u ? (u === 'JW' ? 'bg-lime-400 text-black' : 'bg-orange-500 text-white') : 'text-slate-600'"
                class="px-6 py-2 rounded-xl font-black transition-all text-xs uppercase">{{ u }}</button>
      </div>
    </header>

    <div v-if="userTimers[user] > 0" class="mb-6 rounded-[2.5rem] overflow-hidden shadow-2xl animate-fadeIn">
      <div :class="user === 'JW' ? 'bg-lime-400 text-black' : 'bg-orange-500 text-white'" class="p-10 text-center">
        <div class="text-8xl font-digital mb-8 tracking-tighter">{{ userTimers[user] }}s</div>
        <button @click="skipRest" class="bg-black/10 px-10 py-3 rounded-full text-[10px] font-black uppercase border border-black/10">Skip Interval</button>
      </div>
    </div>

    <div class="glass rounded-[2rem] p-6 mb-6 shadow-2xl border-t border-white/10">
      <div class="space-y-6">
        <div>
          <label class="text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2 ml-1">Action</label>
          <select v-model="form.exercise" @change="loadLastInput" class="w-full bg-slate-800 rounded-2xl p-4 text-sm font-bold text-white outline-none ring-1 ring-slate-700">
            <optgroup v-for="(list, cat) in actionLibrary[user]" :label="cat" class="bg-slate-900">
              <option v-for="ex in list" :value="ex">{{ ex }}</option>
            </optgroup>
          </select>
        </div>

        <div v-if="unitType === 'min'" class="space-y-2">
          <label class="text-[10px] font-black text-lime-400 uppercase tracking-widest ml-1">Duration (Minutes)</label>
          <input v-model.number="form.duration" type="number" inputmode="numeric" placeholder="0" class="w-full bg-slate-900/50 rounded-[1.5rem] p-6 text-4xl font-black text-center text-lime-400 outline-none ring-1 ring-slate-700">
        </div>

        <div v-else-if="unitType === 'km'" class="space-y-2">
          <label class="text-[10px] font-black text-cyan-400 uppercase tracking-widest ml-1">Distance (KM)</label>
          <input v-model.number="form.weight" type="number" step="0.1" inputmode="decimal" placeholder="0.0" class="w-full bg-slate-900/50 rounded-2xl p-5 text-4xl font-black text-center text-cyan-400 outline-none ring-1 ring-slate-700">
        </div>
        
        <div v-else class="grid grid-cols-2 gap-4">
          <div class="space-y-2">
            <label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Weight (kg)</label>
            <input v-model.number="form.weight" type="number" step="0.5" inputmode="decimal" placeholder="0.0" class="w-full bg-slate-900/50 rounded-2xl p-5 text-2xl font-black text-center outline-none ring-1 ring-slate-700">
          </div>
          <div class="space-y-2">
            <label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Reps</label>
            <input v-model.number="form.reps" type="number" inputmode="numeric" placeholder="0" class="w-full bg-slate-900/50 rounded-2xl p-5 text-2xl font-black text-center outline-none ring-1 ring-slate-700">
          </div>
        </div>

        <div v-if="user === 'EP'" class="flex justify-between items-center bg-red-500/5 p-4 rounded-2xl border border-red-500/10">
          <span class="text-xs font-black text-red-400 italic">Discomfort / Pain?</span>
          <input type="checkbox" v-model="form.pain" class="w-6 h-6 accent-red-500">
        </div>

        <button @click="logData" :disabled="loading" 
                class="w-full bg-white text-black font-black py-5 rounded-[1.5rem] active:scale-95 transition-all shadow-xl uppercase tracking-widest text-xs flex justify-center items-center gap-3">
          {{ loading ? 'Syncing...' : 'Log Set & Start Rest' }}
        </button>
      </div>
    </div>

    <div class="glass rounded-[2rem] p-6 mb-6">
      <div class="flex justify-between items-center mb-6 px-1">
        <span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Training Consistency</span>
        <span class="text-[9px] font-black text-slate-400 bg-slate-800 px-3 py-1 rounded-full uppercase">{{ currentMonthName }}</span>
      </div>
      <div class="grid grid-cols-7 gap-y-4 text-center">
        <div v-for="d in ['S','M','T','W','T','F','S']" class="text-[9px] font-black text-slate-700 uppercase">{{ d }}</div>
        <div v-for="e in calendarOffset" class="aspect-square"></div>
        <div v-for="d in daysInMonth" :key="d" class="relative group py-1">
          <span :class="isToday(d) ? 'text-lime-400 font-black' : 'text-slate-600'" class="text-[11px] font-bold">{{ d }}</span>
          <div v-if="hasLog(d)" 
               :class="[user === 'JW' ? 'bg-lime-400' : 'bg-orange-500', getDayStats(d).hasPain ? 'ring-2 ring-red-500 ring-offset-2 ring-offset-slate-900' : '']" 
               class="w-1.5 h-1.5 rounded-full mx-auto mt-2"></div>
        </div>
      </div>
    </div>

    <div class="space-y-4">
      <div class="flex justify-between items-end px-3">
        <h3 class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Today's Performance</h3>
        <div class="text-right leading-none">
          <div class="text-[8px] font-black text-slate-600 uppercase mb-1 tracking-widest">Daily Summary</div>
          <div class="text-lg font-black text-white italic tracking-tighter">{{ formatVol(dailyVol) }}<span class="text-[10px] ml-0.5 text-slate-500">{{ unitLabel }}</span></div>
        </div>
      </div>
      
     <div v-if="todayLogs.length === 0" class="text-center py-12 text-slate-700 text-[10px] font-black uppercase tracking-widest bg-slate-900/20 rounded-[2rem] border border-dashed border-slate-800">
        Waiting for first set...
      </div>
      
      <div v-for="(log, i) in todayLogs" :key="log.id || i"
           :class="isPainful(log) ? 'border-red-500/40 bg-red-500/5' : 'border-slate-800 bg-slate-900/40'" 
           class="border-l-[6px] p-5 rounded-2xl flex justify-between items-center animate-fadeIn shadow-lg transition-all mb-4">
        <div class="flex-1">
          <div class="font-black text-sm tracking-tight mb-1 uppercase">{{ log.exercise }}</div>
          <div class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">
            <span v-if="log.unit === 'min'" class="text-lime-400">{{ log.duration }} min Duration</span>
            <span v-else-if="log.unit === 'km'" class="text-cyan-400">{{ log.weight }} km Distance</span>
            <span v-else class="flex gap-3">
              <span>{{ log.weight }}kg</span>
              <span class="text-slate-700">/</span>
              <span>{{ log.reps }} Reps</span>
            </span>
          </div>
        </div>
        <div class="text-right">
          <div v-if="log.weight > 0 && log.unit === 'kg'" class="text-xs font-black text-slate-400 italic">{{ log.weight * log.reps }}KG</div>
          <div v-if="isPainful(log)" class="text-[8px] font-black text-red-500 uppercase mt-2 px-2 py-0.5 bg-red-500/10 rounded border border-red-500/20 tracking-tighter">Injury Warning</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>

const { createApp, ref, computed, onMounted, watch, nextTick, triggerRef } = Vue;

createApp({
  setup() {
    const BASE_URL = 'https://script.google.com/macros/s/AKfycbzrF0AUaOPovXz86j9KkDZX1q1T3_OBf3SBCG_a2AapdswZZQyiwMGQ3LeuEbXsFMnFBQ/exec';
    const MASTER_PASS = "0303";
    
    const isAuthenticated = ref(false);
    const passInput = ref("");
    const passError = ref(false);
    const user = ref('JW');
    const userTimers = ref({ JW: 0, EP: 0 });
    const intervals = { JW: null, EP: null };
    const loading = ref(false);
    const syncing = ref(false);
    const rawLogs = ref([]);
    const form = ref({ exercise: '', weight: '', reps: '', duration: '', rest: 90, pain: false });

    // Áµ±‰∏ÄÁç≤Âèñ‰ªäÊó•Êó•ÊúüÂ≠ó‰∏≤ (YYYY/M/D)
    const getTodayStr = (dateObj = new Date()) => {
  const d = new Date(dateObj);
  // Âº∑Âà∂Áî¢Âá∫ YYYY-MM-DD Ê†ºÂºèÔºå‰æãÂ¶Ç 2025-12-23
  return d.toISOString().split('T')[0];
};

    const actionLibrary = {
      JW: {
        "Chest": ["Incline Bench Press", "Flat Bench Press", "Dumbbell Flyes", "Cable Cross", "Push-ups", "Chest Press Machine", "Dips (Chest Focus)"],
        "Back": ["Pull-ups", "Lat Pulldown", "Seated Row", "Barbell Row", "Face Pulls", "Deadlift", "Single Arm DB Row", "Hyperextensions", "T-Bar Row"],
        "Shoulder": ["Military Press", "Lateral Raises", "Front Raises", "Reverse Fly", "Arnold Press", "Upright Row", "Shrugs"],
        "Legs": ["Squat", "Leg Press", "Leg Extension", "Leg Curl", "Calf Raises", "Split Squat", "Romanian Deadlift", "Goblet Squat", "Lunge"],
        "Arms": ["Bicep Curl", "Hammer Curl", "Tricep Pushdown", "Skull Crusher", "Dips", "Preacher Curl", "Concentration Curl", "Overhead Extension"],
        "Cardio/Timed": ["Plank", "L-Sit", "Incline Treadmill", "Rowing Machine", "Battle Ropes", "Assault Bike", "Sprints", "Box Jumps", "Burpees", "Mountain Climbers", "Jump Rope", "Wall Sit"]
      },
      EP: {
        "Cardio & Fat Loss": ["Brisk Walk", "Incline Walk", "Running (Easy)", "Elliptical", "Stationary Bike", "Stair Climber (Low)", "Rowing Machine (Light)", "Arc Trainer", "Spin Bike", "Swimming (Easy)"],
        "Gym Lower Body": ["Leg Press", "Leg Extension", "Seated Leg Curl", "Hip Abduction", "Hip Adduction", "Smith Squat (Light)", "Smith Glute Bridge", "Standing Calf Raise"],
        "Gym Upper Body": ["Lat Pulldown", "Seated Row", "Chest Press", "Assisted Pull-up", "Cable Face Pull", "Straight Arm Pulldown", "Pec Deck (Light)", "Rear Delt Fly"],
        "Spine & Posture": ["Glute Bridge", "Dead Bug", "Bird Dog", "Cat-Cow", "Pelvic Tilt", "Wall Slides", "Chin Tuck", "Clamshells"],
        "Core Stability": ["Plank", "Side Plank (Knees)", "Heel Slides", "Marching Bridge", "Pallof Press", "Back Extension"],
        "Lower Rehab": ["Bodyweight Squat", "Wall Sit (Light)", "Step-ups (Low)", "Calf Raises (BW)", "Hamstring Stretch"]
      }
    };

    form.value.exercise = actionLibrary.JW["Chest"][0];

    const unitType = computed(() => {
      const e = form.value.exercise.toLowerCase();
      if (["plank", "sit", "hold", "yoga", "tai chi", "dead bug", "bird dog", "stretch"].some(k => e.includes(k))) return 'min';
      if (["treadmill", "running", "walk", "bike", "swimming", "stairmaster", "sprint", "elliptical", "rowing"].some(k => e.includes(k))) return 'km';
      return 'kg';
    });

    const unitLabel = computed(() => unitType.value.toUpperCase());

   const fetchHistory = async (isBackground = false) => {
  if (!isAuthenticated.value) return;
  if (!isBackground) syncing.value = true;
  
  try {
    const res = await fetch(`${BASE_URL}?user=${user.value}`);
    const data = await res.json();
    const incomingLogs = data.logs || [];

    // „ÄêÂéªÈáçÈÇèËºØ„Äë
    // Âè™‰øùÁïô‰ª≤Êú™‰∏äÂÇ≥ÊàêÂäüÂòÖ temp Á¥ÄÈåÑÔºå‰ΩÜÂ¶ÇÊûú incomingLogs ÂÖ•Èù¢Â∑≤Á∂ìÊúâÁõ∏ÂêåÂÖßÂÆπÔºàExercise/Weight/RepsÔºâÔºå
    // Â∞±‰ª£Ë°®Èõ≤Á´ØÂ∑≤Á∂ìËøîÂíóÂöüÔºåÂèØ‰ª•Ë∏¢Ëµ∞ÂÄã temp Á¥ÄÈåÑ„ÄÇ
    const cleanedLocal = rawLogs.value.filter(local => {
      if (!String(local.id).startsWith('temp_')) return false;
      // Ê™¢Êü• incomingLogs ÊúâÂÜá‰∏ÄÊ¢ù‰∏ÄÊ®°‰∏ÄÊ®£ÂòÖÔºà‰ª£Ë°®Â∑≤Á∂ì Sync ÂÆåÔºâ
      const alreadySynced = incomingLogs.some(cloud => 
        cloud.exercise === local.exercise && 
        cloud.weight == local.weight && 
        cloud.reps == local.reps
      );
      return !alreadySynced; // Â¶ÇÊûúÊú™ sync ÂÆåÂ∞±‰øùÁïô
    });

    // ÈáçÊñ∞ÁµÑÂêàÔºö[‰ª≤Êú™‰∏äÂÇ≥ÂÆåÂòÖ] + [Èõ≤Á´ØÊâÄÊúâËàäÁ¥ÄÈåÑ]
    rawLogs.value = [...cleanedLocal, ...incomingLogs];
    
    if (typeof triggerRef === 'function') triggerRef(rawLogs);
  } catch (e) {
    console.error("Sync Failed", e);
  } finally {
    syncing.value = false;
  }
};

    const logData = async () => {
  if (loading.value) return;

  // 1. Ê™¢Êü•ÂøÖÂ°´È†Ö
  if (!form.value.exercise) return alert("Ë´ãÈÅ∏ÊìáÂãï‰Ωú");

  // 2. Âª∫Á´ãÊö´ÊôÇ ID
  const tempId = 'temp_' + Date.now();
  const payload = {
    id: tempId, 
    date: getTodayStr(),
    user: user.value,
    exercise: form.value.exercise,
    weight: Number(form.value.weight) || 0,
    reps: Number(form.value.reps) || 0,
    duration: Number(form.value.duration) || 0,
    rest: Number(form.value.rest) || 90,
    pain: form.value.pain ? "Yes" : "No",
    unit: unitType.value
  };

  // 3. Âç≥ÊôÇÂä†ÂÖ•Áï´Èù¢ (Optimistic Update)
  rawLogs.value.unshift(payload);
  
  loading.value = true;
  try {
    saveLastInput(); 

    // ‰ΩøÁî® URLSearchParams ‰øÇÊúÄÁ©©Èô£ÂòÖ POST ÊñπÂºèÔºåÈÅøÂÖç CORS ÈòªÊîî
    const formData = new URLSearchParams();
    for (const key in payload) {
      formData.append(key, payload[key]);
    }

    // ÁôºÈÄÅÂà∞ Google Sheet
    await fetch(BASE_URL, {
      method: 'POST',
      mode: 'no-cors', // ‰æùÁÑ∂Á∂≠ÊåÅ no-corsÔºå‰ΩÜÂÖßÂÆπÊúÉÁ∂ì URLSearchParams ÂÇ≥ÈÄÅ
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: formData.toString()
    });
    
    startTimer(form.value.rest);
    form.value.pain = false;

    // Á≠â 3.5 ÁßíÂæåÂêåÊ≠•
    setTimeout(() => {
      fetchHistory(true); 
    }, 3500);
    
  } catch (e) { 
    console.error(e);
    alert(`Sync Error: Ë≥áÊñôÂèØËÉΩÊú™ÊàêÂäü‰∏äÂÇ≥`); 
  } finally { 
    loading.value = false; 
  }
};
   const todayLogs = computed(() => {
  const d = new Date();
  const today = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;
  const currentUser = user.value;

  if (!rawLogs.value || rawLogs.value.length === 0) return [];

  return rawLogs.value.filter(l => {
    if (String(l.user).trim() !== String(currentUser).trim()) return false;

    try {
      let logD = new Date(l.date);
      if (isNaN(logD.getTime())) {
        let cleanStr = String(l.date).replace(/\//g, '-').split(' ')[0];
        logD = new Date(cleanStr);
      }
      if (isNaN(logD.getTime())) return false;

      const logStr = `${logD.getFullYear()}-${String(logD.getMonth() + 1).padStart(2, '0')}-${String(logD.getDate()).padStart(2, '0')}`;
      return logStr === today;
    } catch (e) {
      return false;
    }
  });
});

    const dailyVol = computed(() => {
      return todayLogs.value.reduce((acc, l) => {
        if (l.unit === 'min') return acc + (Number(l.duration) || 0);
        if (l.unit === 'km') return acc + (Number(l.weight) || 0);
        return acc + (Number(l.weight) * Number(l.reps) || 0);
      }, 0);
    });

    // ËºîÂä©ÂáΩÊï∏
    const isPainful = (log) => log.pain === 'Yes' || log.pain === 'TRUE' || log.pain === true;
    const formatVol = (v) => v >= 1000 ? (v/1000).toFixed(1)+'k' : v.toFixed(unitType.value === 'km' ? 1 : 0);
    const checkPass = () => {
      if (passInput.value === MASTER_PASS) {
        isAuthenticated.value = true;
        localStorage.setItem('gym_auth', 'true');
        fetchHistory();
      } else if (passInput.value.length >= 4) {
        passError.value = true;
        setTimeout(() => { passError.value = false; passInput.value = ""; }, 1000);
      }
    };
    const switchUser = (u) => { user.value = u; fetchHistory(); };
    const skipRest = () => { userTimers.value[user.value] = 0; if(intervals[user.value]) clearInterval(intervals[user.value]); };
    const startTimer = (s) => {
      userTimers.value[user.value] = s;
      if (intervals[user.value]) clearInterval(intervals[user.value]);
      intervals[user.value] = setInterval(() => {
        if (userTimers.value[user.value] > 0) userTimers.value[user.value]--;
        else clearInterval(intervals[user.value]);
      }, 1000);
    };
    const saveLastInput = () => {
      localStorage.setItem(`last_${user.value}_${form.value.exercise}`, JSON.stringify({
        weight: form.value.weight, reps: form.value.reps, duration: form.value.duration
      }));
    };
    const loadLastInput = () => {
      const saved = localStorage.getItem(`last_${user.value}_${form.value.exercise}`);
      if (saved) {
        const d = JSON.parse(saved);
        form.value.weight = d.weight; form.value.reps = d.reps; form.value.duration = d.duration;
      } else {
        form.value.weight = ''; form.value.reps = ''; form.value.duration = '';
      }
    };

    // Calendar & Streak
    const now = new Date();
    const currentMonthName = now.toLocaleString('default', { month: 'long' });
    const daysInMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
    const calendarOffset = new Date(now.getFullYear(), now.getMonth(), 1).getDay();
    const isToday = (d) => d === now.getDate() && now.getMonth() === new Date().getMonth();
    const hasLog = (d) => {
      const targetDate = getTodayStr(new Date(now.getFullYear(), now.getMonth(), d));
      return rawLogs.value.some(l => {
        // Áµ±‰∏ÄËΩâÂÅö Date ÂÜçËΩâËøî YYYY-MM-DD ÊØîÂ∞ç
        try {
          const dObj = new Date(l.date);
          const logDateStr = dObj.toISOString().split('T')[0];
          return logDateStr === targetDate;
        } catch(e) { return false; }
      });
    };

    const getDayStats = (d) => {
      const targetDate = getTodayStr(new Date(now.getFullYear(), now.getMonth(), d));
      const logs = rawLogs.value.filter(l => {
        try {
          return new Date(l.date).toISOString().split('T')[0] === targetDate;
        } catch(e) { return false; }
      });
      return { hasPain: logs.some(isPainful) };
    };
    const streak = computed(() => {
  // Â∞áÊâÄÊúâÁ¥ÄÈåÑÂòÖÊó•ÊúüÁµ±‰∏ÄËΩâÂÅö YYYY-MM-DD Ê†ºÂºèÂòÖ Set
  const dates = new Set(rawLogs.value.map(l => {
    try {
      return new Date(l.date).toISOString().split('T')[0];
    } catch(e) { return null; }
  }).filter(d => d !== null));

  let count = 0;
  let d = new Date();
  let todayStr = getTodayStr(d);

  // Â¶ÇÊûú‰ªäÊó•ÁÑ°Á¥ÄÈåÑÔºåÂ∞±Áî±Áê¥Êó•ÈñãÂßãË®àËµ∑ÔºàË≤ª‰∫ã‰∏ÄÈÅé 12 ÈªûÂ∞±Êñ∑ StreakÔºâ
  if (!dates.has(todayStr)) {
    d.setDate(d.getDate() - 1);
    todayStr = getTodayStr(d);
  }

  // Âè™Ë¶Å Set Ë£°Èù¢ÊúâÂë¢ÂÄãÊó•ÊúüÔºåÂ∞± count++ Âêë‰∏äÊï∏
  while (dates.has(todayStr)) {
    count++;
    d.setDate(d.getDate() - 1);
    todayStr = getTodayStr(d);
  }
  return count;
});

    onMounted(() => {
    // Ê™¢Êü• localStorage ÊÅ¢Âæ©ÁôªÂÖ•
    const auth = localStorage.getItem('gym_auth');
    if (auth === 'true') {
        isAuthenticated.value = true;
        // ÁôªÂÖ•ÂíóÂ∞±Âç≥ÂàªÂéªÊîûË≥áÊñô
        fetchHistory();
    }
});

    return { 
      isAuthenticated, passInput, passError, checkPass,
      user, userTimers, form, actionLibrary, loading, syncing,
      daysInMonth, calendarOffset, isToday, hasLog, getDayStats,
      switchUser, streak, todayLogs, unitType, unitLabel, skipRest, logData,
      dailyVol, formatVol, currentMonthName, loadLastInput, isPainful
    }
  }
}).mount('#app')
</script>
</body>
</html>